{"ast":null,"code":"const canvas = document.getElementById('canvas');\nconst ctx = canvas.getContext('2d');\nctx.fillStyle = 'white';\nctx.fillRect(0, 0, canvas.width, canvas.height);\nconst undoButton = document.getElementById('undo');\nundoButton.addEventListener('click', undo);\nconst redoButton = document.getElementById('redo');\nredoButton.addEventListener('click', redo);\nlet isDrawing = false;\nlet currentColor = 'black';\nlet currentSize = 10;\nlet currentTool = 'pen';\ncanvas.addEventListener('mousedown', startDrawing);\ncanvas.addEventListener('mousemove', draw);\ncanvas.addEventListener('mouseup', stopDrawing);\ncanvas.addEventListener('mouseout', stopDrawing);\nconst controls = document.getElementById('controls');\ncontrols.addEventListener('click', setTool);\nfunction startDrawing(event) {\n  isDrawing = true;\n  ctx.beginPath();\n  ctx.moveTo(event.offsetX, event.offsetY);\n}\nfunction draw(event) {\n  if (isDrawing) {\n    ctx.lineTo(event.offsetX, event.offsetY);\n    ctx.strokeStyle = currentColor;\n    ctx.lineWidth = currentSize;\n    ctx.stroke();\n    states.push({\n      image: canvas.toDataURL(),\n      stroke: {\n        color: currentColor,\n        width: currentSize,\n        x: event.offsetX,\n        y: event.offsetY\n      }\n    });\n    currentState++;\n  }\n}\nfunction stopDrawing() {\n  isDrawing = false;\n}\nfunction setTool(event) {\n  if (event.target.id === 'pen') {\n    currentTool = 'pen';\n    currentColor = 'black';\n  } else if (event.target.id === 'eraser') {\n    currentTool = 'eraser';\n    currentColor = 'white';\n  } else if (event.target.id === 'small') {\n    if (currentTool === 'pen') currentColor = 'black';\n    currentSize = 10;\n  } else if (event.target.id === 'medium') {\n    if (currentTool === 'pen') currentColor = 'black';\n    currentSize = 20;\n  } else if (event.target.id === 'large') {\n    if (currentTool === 'pen') currentColor = 'black';\n    currentSize = 30;\n  } else if (event.target.id === 'clear') {\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n  } else if (event.target.id === 'download') {\n    downloadCanvas();\n  }\n}\nfunction downloadCanvas() {\n  const link = document.createElement('a');\n  link.download = 'image.jpg';\n  link.href = canvas.toDataURL('image/jpeg');\n  link.click();\n}\n\n//=====================================================\n\nlet currentState = 0;\nlet states = [];\n\n// Push the initial state of the canvas onto the states array\nstates.push(canvas.toDataURL());\nfunction undo() {\n  if (currentState > 0) {\n    currentState--;\n    // Redraw the previous state of the canvas, but remove the last stroke\n    const image = new Image();\n    image.src = states[currentState].image;\n    image.onload = function () {\n      ctx.drawImage(image, 0, 0);\n    };\n  }\n}\nfunction redo() {\n  if (currentState < states.length - 1) {\n    currentState++;\n    const image = new Image();\n    image.src = states[currentState].image;\n    image.onload = function () {\n      ctx.drawImage(image, 0, 0);\n    };\n  }\n}","map":{"version":3,"names":["canvas","document","getElementById","ctx","getContext","fillStyle","fillRect","width","height","undoButton","addEventListener","undo","redoButton","redo","isDrawing","currentColor","currentSize","currentTool","startDrawing","draw","stopDrawing","controls","setTool","event","beginPath","moveTo","offsetX","offsetY","lineTo","strokeStyle","lineWidth","stroke","states","push","image","toDataURL","color","x","y","currentState","target","id","downloadCanvas","link","createElement","download","href","click","Image","src","onload","drawImage","length"],"sources":["C:/Users/ramda/Documents/Projects/rakugaki/rakugaki_app/src/Components/rakugakidraw.js"],"sourcesContent":["\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.fillStyle = 'white';\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    \r\n    const undoButton = document.getElementById('undo');\r\n    undoButton.addEventListener('click', undo);\r\n    const redoButton = document.getElementById('redo');\r\n    redoButton.addEventListener('click', redo);\r\n    \r\n    \r\n    let isDrawing = false;\r\n    let currentColor = 'black';\r\n    let currentSize = 10;\r\n    let currentTool = 'pen';\r\n    \r\n    canvas.addEventListener('mousedown', startDrawing);\r\n    canvas.addEventListener('mousemove', draw);\r\n    canvas.addEventListener('mouseup', stopDrawing);\r\n    canvas.addEventListener('mouseout', stopDrawing);\r\n    \r\n    const controls = document.getElementById('controls');\r\n    controls.addEventListener('click', setTool);\r\n    \r\n    function startDrawing(event) {\r\n      isDrawing = true;\r\n      ctx.beginPath();\r\n      ctx.moveTo(event.offsetX, event.offsetY);\r\n    }\r\n    \r\n    function draw(event) {\r\n      if (isDrawing) {\r\n        ctx.lineTo(event.offsetX, event.offsetY);\r\n        ctx.strokeStyle = currentColor;\r\n        ctx.lineWidth = currentSize;\r\n        ctx.stroke();\r\n        states.push({\r\n            image: canvas.toDataURL(),\r\n            stroke: {\r\n                color: currentColor,\r\n                width: currentSize,\r\n                x: event.offsetX,\r\n                y: event.offsetY\r\n            }\r\n        });\r\n        currentState++;\r\n      }\r\n    }\r\n    \r\n    function stopDrawing() {\r\n      isDrawing = false;\r\n    }\r\n    \r\n    function setTool(event) {\r\n      if (event.target.id === 'pen') {\r\n        currentTool = 'pen';\r\n        currentColor = 'black';\r\n      } else if (event.target.id === 'eraser') {\r\n        currentTool = 'eraser';\r\n        currentColor = 'white';\r\n      } else if (event.target.id === 'small') {\r\n        if(currentTool === 'pen') currentColor = 'black';\r\n        currentSize = 10;\r\n      } else if (event.target.id === 'medium') {\r\n        if(currentTool === 'pen') currentColor = 'black';\r\n        currentSize = 20;\r\n      } else if (event.target.id === 'large') {\r\n        if(currentTool === 'pen') currentColor = 'black';\r\n        currentSize = 30;\r\n      } else if (event.target.id === 'clear') {\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      } else if (event.target.id === 'download') {\r\n        downloadCanvas();\r\n      }\r\n    }\r\n    \r\n    function downloadCanvas() {\r\n      const link = document.createElement('a');\r\n      link.download = 'image.jpg';\r\n      link.href = canvas.toDataURL('image/jpeg');\r\n      link.click();\r\n      }\r\n      \r\n      //=====================================================\r\n      \r\n      let currentState = 0;\r\n      let states = [];\r\n      \r\n      // Push the initial state of the canvas onto the states array\r\n      states.push(canvas.toDataURL());\r\n      \r\n      function undo() {\r\n      if (currentState > 0) {\r\n      currentState--;\r\n      // Redraw the previous state of the canvas, but remove the last stroke\r\n      const image = new Image();\r\n      image.src = states[currentState].image;\r\n      image.onload = function() {\r\n      ctx.drawImage(image, 0, 0);\r\n      };\r\n      }\r\n      }\r\n      \r\n      function redo() {\r\n      if (currentState < states.length - 1) {\r\n      currentState++;\r\n      const image = new Image();\r\n      image.src = states[currentState].image;\r\n      image.onload = function() {\r\n      ctx.drawImage(image, 0, 0);\r\n      };\r\n      }\r\n      }\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}